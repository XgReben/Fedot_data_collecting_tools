# Fedot_data_collecting_tools
Utilities for collecting and prigessing data on edge device for Fedot.Industrial and frdcore frameworks

–ü—Ä–æ–µ–∫—Ç —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å –¥–∞—Ç—á–∏–∫–æ–≤ —á–µ—Ä–µ–∑ ESP32 –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Fedot.Industrial

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤ (—Ç–æ–∫, –º–∏–∫—Ä–æ—Ñ–æ–Ω, –≤–∏–±—Ä–∞—Ü–∏—è) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ESP32, –ø–µ—Ä–µ–¥–∞—á–∏ –∏—Ö –ø–æ WiFi –≤ MQTT-–±—Ä–æ–∫–µ—Ä (Wirenboard 7) –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ Python –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç InputData —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ https://github.com/aimclub/Fedot.Industrial.

üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–∞—Ç—á–∏–∫–æ–≤ –∫ ESP32
ESP32 —Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å —Ç—Ä–µ—Ö –∞–Ω–∞–ª–æ–≥–æ–≤—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤:

–¢–æ–∫–æ–≤—ã–π –¥–∞—Ç—á–∏–∫ (CUR_SENSE_0) ‚Üí GPIO 32
–ú–∏–∫—Ä–æ—Ñ–æ–Ω (MIC_SENSE_0) ‚Üí GPIO 33
–î–∞—Ç—á–∏–∫ –≤–∏–±—Ä–∞—Ü–∏–∏ (VIBRO_SENSE_0) ‚Üí GPIO 35
–°—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
–î–∞—Ç—á–∏–∫	GPIO ESP32	–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
–¢–æ–∫–æ–≤—ã–π –¥–∞—Ç—á–∏–∫	32	–ü–æ–¥–∫–ª—é—á–µ–Ω —á–µ—Ä–µ–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä 100 –û–º
–ú–∏–∫—Ä–æ—Ñ–æ–Ω	33	–ê–Ω–∞–ª–æ–≥–æ–≤—ã–π –º–∏–∫—Ä–æ—Ñ–æ–Ω–Ω—ã–π –º–æ–¥—É–ª—å
–î–∞—Ç—á–∏–∫ –≤–∏–±—Ä–∞—Ü–∏–∏	35	–ü—å–µ–∑–æ—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —Å–µ–Ω—Å–æ—Ä
üìå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

–ê–¶–ü —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ DMA (–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —á—Ç–µ–Ω–∏–µ).
–ß–∞—Å—Ç–æ—Ç–∞ –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏: 240 –∫–ì—Ü.
–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ê–¶–ü: 12 –±–∏—Ç.
üì∂ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WiFi –∏ MQTT
ESP32 –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Wirenboard 7 –ø–æ WiFi –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ MQTT.

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ç–∏
const char* ssid = "Wirenboard";  
const char* password = "Wirenboard";  
const char* mqttServer = "192.168.0.67";  
const int mqttPort = 1883;  
const char* mqttUser = "Fedot_collector_ADC";  
const char* mqttPassword = –±–µ–∑ –ø–∞—Ä–æ–ª—è

–û—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ MQTT-—Å–æ–æ–±—â–µ–Ω–∏—è
–¢–æ–ø–∏–∫	–î–∞–Ω–Ω—ã–µ	–û–ø–∏—Å–∞–Ω–∏–µ
URL	http://<IP_ESP32>/get_data	URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ HTTP
Data	0 (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö) / 1 (–µ—Å—Ç—å)	–§–ª–∞–≥ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

üìå –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

ESP32 –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ WiFi –∏ MQTT.
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–π URL (http://<IP_ESP32>/get_data).
–ö–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã (data_ready = 1), –ø–æ –∑–∞–ø—Ä–æ—Å—É http://<IP_ESP32>/get_data –¥–æ—Å—Ç—É–ø–Ω—ã –¥–∞–Ω–Ω—ã–µ —Å –¥–∞—Ç—á–∏–∫–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ json

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å –¥–∞—Ç—á–∏–∫–æ–≤ (—Ç–æ–∫, –º–∏–∫—Ä–æ—Ñ–æ–Ω, –≤–∏–±—Ä–∞—Ü–∏—è) ESP32 —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç JSON-–ø–∞–∫–µ—Ç —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

{
  "current": [123, 125, 118, 120, 122, ...],
  "mic": [450, 455, 460, 452, 448, ...],
  "vibro": [200, 205, 210, 208, 203, ...],
  "metadata": {
    "sample_rate": 240000,
    "resolution": 12,
    "timestamp": "2024-05-20T14:30:00Z",
    "device_id": "ESP32-ABCD1234"
  }
}

–†–∞–∑–±–æ—Ä –ø–æ–ª–µ–π:
current (array[int]):
–ê–Ω–∞–ª–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å —Ç–æ–∫–æ–≤–æ–≥–æ –¥–∞—Ç—á–∏–∫–∞ (GPIO 32).
–ü—Ä–∏–º–µ—Ä: [123, 125, 118, ...] (12-–±–∏—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, 0‚Äì4095).
mic (array[int]):
–î–∞–Ω–Ω—ã–µ —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ (GPIO 33).
–ü—Ä–∏–º–µ—Ä: [450, 455, 460, ...].
vibro (array[int]):
–ü–æ–∫–∞–∑–∞–Ω–∏—è –≤–∏–±—Ä–æ–¥–∞—Ç—á–∏–∫–∞ (GPIO 35).
–ü—Ä–∏–º–µ—Ä: [200, 205, 210, ...].
metadata (object):
sample_rate: –ß–∞—Å—Ç–æ—Ç–∞ –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏ (240 –∫–ì—Ü). !!! –¢–∞–∫ –∫–∞–∫ –¥–∞—Ç—á–∏–∫–∏ –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã–µ –∫–æ–ª–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–±–æ—Ä–æ–∫ —Ä–∞–≤–Ω–æ –ß–î/–∫–æ–ª–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–∞–ª–æ–≤
resolution: –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ê–¶–ü (12 –±–∏—Ç).
timestamp: –í—Ä–µ–º—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ ISO-—Ñ–æ—Ä–º–∞—Ç–µ.
device_id: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä ESP32 (MAC-–∞–¥—Ä–µ—Å).

–ü—Ä–∏–º–µ—Ä HTTP-–æ—Ç–≤–µ—Ç–∞ –æ—Ç /get_data
–ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ GET http://<IP_ESP32>/get_data —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

HTTP/1.1 200 OK
Content-Type: application/json

{
  "current": [123, 125, 118, 120, 122, ...],
  "mic": [450, 455, 460, 452, 448, ...],
  "vibro": [200, 205, 210, 208, 203, ...],
  "metadata": {
    "sample_rate": 240000,
    "resolution": 12,
    "timestamp": "2024-05-20T14:30:00Z",
    "device_id": "ESP32-ABCD1234"
  }
}

–ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ Python?
–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ HTTP:
   import requests
   response = requests.get("http://192.168.0.100/get_data")
   data = response.json()  # –ü–æ–ª—É—á–∞–µ–º JSON

–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ InputData –¥–ª—è Fedot.Industrial:
   from fedot.industrial.data import InputData

   input_data = InputData(
       features=[data["current"], data["mic"], data["vibro"]],
       target=None,  # –ï—Å–ª–∏ –Ω–µ—Ç –º–µ—Ç–æ–∫
       task="regression"
   )